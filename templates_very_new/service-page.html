<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="/assets/css/service-page.css">
</head>
<body>
<header data-template="header"></header>
<main>
    <section class="top">
        <h2 data-container="page-title"></h2>
    </section>
    <section class="grid-section">
        <div class="grid-item">
            <div class="img">
                <img src="/assets/images/jpg/service.jpg" alt="">
                <div class="title">
                    <p>Сервисное обслуживание</p>
                </div>
            </div>
        </div>

        <div class="d-flex m-auto"><a class="btn btn-orange"><img src="/assets/images/download.png" alt="">Скачать каталог</a></div>

        <div class="grid-item d-flex">
            <div class="function">
                <img src="/assets/images/service-a.png" alt="">
                <p>Квалифицированные инженеры</p>
            </div>

            <div class="function">
                <img src="/assets/images/service-b.png" alt="">
                <p>Современное оборудование</p>
            </div>

            <div class="function">
                <img src="/assets/images/service-c.png" alt="">
                <p>Площадь сервиса 500м2</p>
            </div>
        </div>
    </section>

    <div class="grid-item-full">
        <div class="fon">
            <div class="form">
                <form>
                    <input class="input-k form-name" type="text" placeholder="Ваше имя">
                    <input class="input-k form-phone" type="tel" placeholder="Ваш телефон">
                    <input class="button-k" id="send" type="submit" value="Записаться на сервис">
                </form>
            </div>
        </div>
    </div>

    <section class="grid-section">
        <div class="grid-item d-flex">
            <div class="function">
                <img src="/assets/images/service-d.png" alt="">
                <p>Выездные бригады</p>
            </div>

            <div class="function">
                <img src="/assets/images/service-e.png" alt="">
                <p>Гарантийное обслуживание</p>
            </div>

            <div class="function">
                <img src="/assets/images/service-f.png" alt="">
                <p>Предпродажная подготовка</p>
            </div>
        </div>

        <div class="grid-title">
            <p>Наши мастера:</p>
        </div>

        <div class="person-block" data-container="persons"></div>

        <div class="d-flex m-auto"><a class="reload-btn"><img src="/assets/images/reload.svg" alt=""></a></div>

        <div class="grid-item grid-item-text">
            <div class="text" data-container="page-text"></div>
        </div>
    </section>
</main>
<footer data-template="footer"></footer>
<script src="/assets/js/base.js"></script>
<script>
    let div = document.querySelector('.form');
    div.querySelector('form').addEventListener('submit', function (ev) {
        ev.preventDefault();
    });
    div.querySelector("#send").addEventListener('click', function () {
        let data = new FormData();
        data.append('name', div.querySelector('.form-name').value);
        data.append('phone', div.querySelector('.form-phone').value);
        return fetch('/system/plugins/SecArgonia/feedback/service/create', {method: 'POST', credentials: 'same-origin', body: data})
            .then(function (response) {
                let responseData = false;
                try {
                    responseData = response.json();
                }
                catch (e) {
                    responseData = {status: false, statusText: "Произошла ошибка при соединении"};
                    response.text().then(console.debug);
                }

                return responseData;
            })
            .then(function (response) {
                if (response.status) {
                    alert("Ваша заявка принята, мы запишем Вас на обслуживание в ближайшее время");
                }
            });
    });
</script>
</body>
</html>